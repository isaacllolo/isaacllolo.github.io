---
import "../../styles/Technologies.scss";
import TechItem from "../TechItem.astro";

const techSections = {
  frontend: {
    label: "Frontend",
    items: [
      { name: "HTML5", icon: "html5" },
      { name: "CSS3", icon: "css3" },
      { name: "JavaScript", icon: "javascript" },
      { name: "React", icon: "react" },
    ],
  },
  backend: {
    label: "Backend",
    items: [
      { name: "Node.js", icon: "nodedotjs" },
      { name: "Django", icon: "django" },
    ],
  },
  db: {
    label: "Bases de Datos",
    items: [
      { name: "PostgreSQL", icon: "postgresql" },
      { name: "MongoDB", icon: "mongodb" },
    ],
  },
  cicd: {
    label: "CI/CD",
    items: [
      { name: "Ansible", icon: "ansible" },
    ],
  },
  tools: {
    label: "Herramientas",
    items: [
      { name: "Visual Studio Code", icon: "visualstudiocode" },
    ],
  },
};
---
<div id="conocimientos" class="Technologies">
  <h1 class="section-title">Conocimientos</h1>

  <div class="tabs">
    {Object.entries(techSections).map(([key, section], index) => (
      <button
        class="tab-button"
        data-tab={key}
        aria-selected={index === 0 ? "true" : "false"}
      >
        {section.label}
      </button>
    ))}
  </div>

  {Object.entries(techSections).map(([key, section], index) => (
    <div class={`tab-content${index !== 0 ? " hidden" : ""}`} id={key}>
      <h2>{section.label}</h2>
      <div class="consection">
        {section.items.map((item) => (
          <TechItem name={item.name} icon={item.icon} />
        ))}
      </div>
    </div>
  ))}
</div>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.tab-button');
    const contents = document.querySelectorAll('.tab-content');

    buttons.forEach((btn) => {
      btn.addEventListener('click', () => {
        buttons.forEach((b) => b.setAttribute('aria-selected', 'false'));
        contents.forEach((c) => c.classList.add('hidden'));

        btn.setAttribute('aria-selected', 'true');
        const tabId = btn.dataset.tab;
        document.getElementById(tabId).classList.remove('hidden');
      });
    });
  });
</script>
